<!-- 
  Copyright 2025 Marcus Downing
  Licensed under the Artistic License 2.0
-->

<template>
  <div class="colour-output" data-colourname="{{id}}">
    <input type="hidden" name="{{id}}" value="grey" data-bind="value=#build-form.{{id}}">
    <label>{{__ name}}</label>
    <div class="colour-output__inner" data-select="{{select}}">
        <div class="colour-output__pallette">
        </div>
    </div>
    <object class="colour-output__emblem" data="/images/colour-wheel.svg" type="image/svg+xml" class="colour-wheel-svg" width="280" height="280"></object>
  </div>
</template>

<script>
function colourValue(colour) {
  if (colour.match(/#[A-Z0-9]{6}/)) {
    return colour;
  }

  switch (colour) {
    case 'red':
      return '#BF4C4C';
    case 'orange':
      return '#CC843D';
    case 'gold':
      return '#CCAF1F';
    case 'lime':
      return '#76A632';
    case 'green':
      return '#42A642';
    case 'teal':
      return '#3AA66E';
    case 'cyan':
      return '#32A6A6';
    case 'azure':
      return '#3F83B3';
    case 'blue':
      return '#485AB3';
    case 'indigo':
      return '#663FB3';
    case 'violet':
      return '#A03FB3';
    case 'magenta':
      return '#B33F7A';
    case 'red2':
      return '#BF6969';
    case 'orange2':
      return '#BF8A56';
    case 'gold2':
      return '#CCB952';
    case 'lime2':
      return '#91B362';
    case 'green2':
      return '#6BB36B';
    case 'teal2':
      return '#62B389';
    case 'cyan2':
      return '#74B3B3';
    case 'azure2':
      return '#699BBF';
    case 'blue2':
      return '#7380BF';
    case 'indigo2':
      return '#8669BF';
    case 'violet2':
      return '#B169BF';
    case 'magenta2':
      return '#BF6994';
    case 'grey':
      return '#8C8C8C';
  }
  return '#8C8C8C';
}

on ('.colour-output__inner', 'click', (evt) => {
  let select = evt.currentTarget.dataset['select'];
  set('body', 'currentMenu', select);
});

on('.colour-output input', 'change', (evt) => {
  let value = evt.currentTarget.value;
  let output = evt.currentTarget.closest('.colour-output');
  for (let pallette of output.querySelectorAll('.colour-output__pallette')) {
    pallette.style.backgroundColor = colourValue(value);
  }
});
</script>
