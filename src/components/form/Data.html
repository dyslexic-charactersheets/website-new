<template>
  <data id="{{id}}" data-value="{{ json (__ value) }}" data-key="{{key}}"></data>
</template>

<script>

window.dataArchive = {};

all('data', (dataElem) => {
  let id = dataElem.id;
  let data = JSON.parse(dataElem.dataset.value);
  let key = dataElem.dataset.key;

  let dataByKey = {};
  for (let item of data) {
    dataByKey[item[key]] = item;
  }

  window.dataArchive[id] = dataByKey;
});

</script>
